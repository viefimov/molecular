// vite.config.mts
import { defineConfig } from "file:///D:/PROJECT/final-toolset/moleculer-ts/.yarn/__virtual__/vite-virtual-72f683ec2a/0/cache/vite-npm-6.3.5-244c1b4d55-7bc3a1c5ef.zip/node_modules/vite/dist/node/index.js";
import react from "file:///D:/PROJECT/final-toolset/moleculer-ts/.yarn/__virtual__/@vitejs-plugin-react-virtual-5a345d6455/0/cache/@vitejs-plugin-react-npm-4.4.1-461fc91f96-bce482d4ec.zip/node_modules/@vitejs/plugin-react/dist/index.mjs";
import federation from "file:///D:/PROJECT/final-toolset/moleculer-ts/.yarn/cache/@originjs-vite-plugin-federation-npm-1.4.1-ccb746d381-6342d42bfb.zip/node_modules/@originjs/vite-plugin-federation/dist/index.mjs";
import path from "path";
import { globSync } from "file:///D:/PROJECT/final-toolset/moleculer-ts/.yarn/cache/glob-npm-11.0.2-cd5db3a299-5350153024.zip/node_modules/glob/dist/esm/index.js";

// src/vhosts.json
var vhosts_default = {
  "app-public": {
    port: 3001,
    remote: "publicApp"
  },
  "app-demo": {
    port: 3002,
    remote: "demoApp"
  }
};

// vite.config.mts
var __vite_injected_original_dirname = "D:\\PROJECT\\final-toolset\\moleculer-ts";
var APP = process.env.VITE_APP;
var CDN = process.env.VITE_CDN ?? "";
var exposes = globSync(
  `src/${APP}/**/*.federated.tsx`
).map((file) => {
  const [name] = path.basename(file).split(".");
  const parts = file.split(path.sep);
  const url = "./" + parts.join("/");
  return { name, url };
}).reduce((acc, { name, url }) => ({
  ...acc,
  [name]: url
}), {});
var remotes = globSync(
  `src/**/*.federated.tsx`
).map((file) => {
  const parts = file.split(path.sep);
  return parts[1];
}).filter((name) => name !== APP).reduce((acc, app) => {
  return {
    ...acc,
    [vhosts_default[app].remote]: CDN + `/${app}/lib.js`
  };
}, {});
var vite_config_default = defineConfig({
  resolve: {
    alias: {
      "@": path.resolve(__vite_injected_original_dirname, "./src")
    }
  },
  plugins: [
    react(),
    federation({
      name: "lib",
      filename: "lib.js",
      exposes,
      remotes,
      shared: ["react", "react-dom"]
    })
  ],
  build: {
    outDir: "dist/" + process.env.VITE_APP,
    target: "esnext"
  },
  server: {
    host: true,
    port: vhosts_default[APP].port
  },
  preview: {
    host: true,
    port: vhosts_default[APP].port
  }
});
export {
  vite_config_default as default
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsidml0ZS5jb25maWcubXRzIiwgInNyYy92aG9zdHMuanNvbiJdLAogICJzb3VyY2VSb290IjogIkQ6XFxQUk9KRUNUXFxmaW5hbC10b29sc2V0XFxtb2xlY3VsZXItdHNcXCIsCiAgInNvdXJjZXNDb250ZW50IjogWyJjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfZGlybmFtZSA9IFwiRDpcXFxcUFJPSkVDVFxcXFxmaW5hbC10b29sc2V0XFxcXG1vbGVjdWxlci10c1wiO2NvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9maWxlbmFtZSA9IFwiRDpcXFxcUFJPSkVDVFxcXFxmaW5hbC10b29sc2V0XFxcXG1vbGVjdWxlci10c1xcXFx2aXRlLmNvbmZpZy5tdHNcIjtjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfaW1wb3J0X21ldGFfdXJsID0gXCJmaWxlOi8vL0Q6L1BST0pFQ1QvZmluYWwtdG9vbHNldC9tb2xlY3VsZXItdHMvdml0ZS5jb25maWcubXRzXCI7aW1wb3J0IHsgZGVmaW5lQ29uZmlnIH0gZnJvbSAndml0ZSc7XG5pbXBvcnQgcmVhY3QgZnJvbSAnQHZpdGVqcy9wbHVnaW4tcmVhY3QnO1xuaW1wb3J0IGZlZGVyYXRpb24gZnJvbSBcIkBvcmlnaW5qcy92aXRlLXBsdWdpbi1mZWRlcmF0aW9uXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHsgZ2xvYlN5bmMgfSBmcm9tIFwiZ2xvYlwiO1xuXG5pbXBvcnQgdmhvc3RDb25maWcgZnJvbSBcIi4vc3JjL3Zob3N0cy5qc29uXCI7XG5cbmNvbnN0IEFQUCA9IHByb2Nlc3MuZW52LlZJVEVfQVBQO1xuY29uc3QgQ0ROID0gcHJvY2Vzcy5lbnYuVklURV9DRE4gPz8gJyc7XG5cbmNvbnN0IGV4cG9zZXMgPSBnbG9iU3luYyhcbiAgYHNyYy8ke0FQUH0vKiovKi5mZWRlcmF0ZWQudHN4YFxuKVxuICAubWFwKGZpbGUgPT4ge1xuICAgIGNvbnN0IFtuYW1lXSA9IHBhdGguYmFzZW5hbWUoZmlsZSkuc3BsaXQoJy4nKTtcbiAgICBjb25zdCBwYXJ0cyA9IGZpbGUuc3BsaXQocGF0aC5zZXApO1xuICAgIGNvbnN0IHVybCA9ICcuLycgKyBwYXJ0cy5qb2luKCcvJyk7XG4gICAgcmV0dXJuIHsgbmFtZSwgdXJsIH1cbiAgfSlcbiAgLnJlZHVjZSgoYWNjLCB7IG5hbWUsIHVybCB9KSA9PiAoe1xuICAgIC4uLmFjYyxcbiAgICBbbmFtZV06IHVybFxuICB9KSwge30pO1xuXG5jb25zdCByZW1vdGVzID0gZ2xvYlN5bmMoXG4gIGBzcmMvKiovKi5mZWRlcmF0ZWQudHN4YFxuKVxuICAubWFwKGZpbGUgPT4ge1xuICAgIGNvbnN0IHBhcnRzID0gZmlsZS5zcGxpdChwYXRoLnNlcCk7XG4gICAgcmV0dXJuIHBhcnRzWzFdO1xuICB9KVxuICAuZmlsdGVyKG5hbWUgPT4gbmFtZSAhPT0gQVBQKVxuICAucmVkdWNlKChhY2MsIGFwcCkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICAuLi5hY2MsXG4gICAgICBbdmhvc3RDb25maWdbYXBwXS5yZW1vdGVdOiBDRE4gKyBgLyR7YXBwfS9saWIuanNgXG4gICAgfVxuICB9LCB7fSk7XG5cbi8vIGh0dHBzOi8vdml0ZS5kZXYvY29uZmlnL1xuZXhwb3J0IGRlZmF1bHQgZGVmaW5lQ29uZmlnKHtcblx0cmVzb2x2ZToge1xuXHRcdGFsaWFzOiB7XG5cdFx0XHRcIkBcIjogcGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgXCIuL3NyY1wiKVxuXHRcdH0sXG5cdH0sXG5cdHBsdWdpbnM6IFtcblx0XHRyZWFjdCgpLFxuICAgIGZlZGVyYXRpb24oe1xuICAgICAgbmFtZTogXCJsaWJcIixcbiAgICAgIGZpbGVuYW1lOiBcImxpYi5qc1wiLFxuICAgICAgZXhwb3NlcyxcbiAgICAgIHJlbW90ZXMsXG4gICAgICBzaGFyZWQ6IFtcInJlYWN0XCIsIFwicmVhY3QtZG9tXCJdLFxuICAgIH0pLFxuXHRdLFxuICBidWlsZDoge1xuICAgIG91dERpcjogXCJkaXN0L1wiICsgcHJvY2Vzcy5lbnYuVklURV9BUFAsXG4gICAgdGFyZ2V0OiBcImVzbmV4dFwiLFxuICB9LFxuICBzZXJ2ZXI6IHtcbiAgICBob3N0OiB0cnVlLFxuICAgIHBvcnQ6IHZob3N0Q29uZmlnW0FQUF0ucG9ydCxcbiAgfSxcbiAgcHJldmlldzoge1xuICAgIGhvc3Q6IHRydWUsXG4gICAgcG9ydDogdmhvc3RDb25maWdbQVBQXS5wb3J0LFxuICB9XG59KTtcbiIsICJ7XG4gIFwiYXBwLXB1YmxpY1wiOiB7XG4gICAgXCJwb3J0XCI6IDMwMDEsXG4gICAgXCJyZW1vdGVcIjogXCJwdWJsaWNBcHBcIlxuICB9LFxuICBcImFwcC1kZW1vXCI6IHtcbiAgICBcInBvcnRcIjogMzAwMixcbiAgICBcInJlbW90ZVwiOiBcImRlbW9BcHBcIlxuICB9XG59XG4iXSwKICAibWFwcGluZ3MiOiAiO0FBQTJTLFNBQVMsb0JBQW9CO0FBQ3hVLE9BQU8sV0FBVztBQUNsQixPQUFPLGdCQUFnQjtBQUN2QixPQUFPLFVBQVU7QUFDakIsU0FBUyxnQkFBZ0I7OztBQ0p6QjtBQUFBLEVBQ0UsY0FBYztBQUFBLElBQ1osTUFBUTtBQUFBLElBQ1IsUUFBVTtBQUFBLEVBQ1o7QUFBQSxFQUNBLFlBQVk7QUFBQSxJQUNWLE1BQVE7QUFBQSxJQUNSLFFBQVU7QUFBQSxFQUNaO0FBQ0Y7OztBRFRBLElBQU0sbUNBQW1DO0FBUXpDLElBQU0sTUFBTSxRQUFRLElBQUk7QUFDeEIsSUFBTSxNQUFNLFFBQVEsSUFBSSxZQUFZO0FBRXBDLElBQU0sVUFBVTtBQUFBLEVBQ2QsT0FBTyxHQUFHO0FBQ1osRUFDRyxJQUFJLFVBQVE7QUFDWCxRQUFNLENBQUMsSUFBSSxJQUFJLEtBQUssU0FBUyxJQUFJLEVBQUUsTUFBTSxHQUFHO0FBQzVDLFFBQU0sUUFBUSxLQUFLLE1BQU0sS0FBSyxHQUFHO0FBQ2pDLFFBQU0sTUFBTSxPQUFPLE1BQU0sS0FBSyxHQUFHO0FBQ2pDLFNBQU8sRUFBRSxNQUFNLElBQUk7QUFDckIsQ0FBQyxFQUNBLE9BQU8sQ0FBQyxLQUFLLEVBQUUsTUFBTSxJQUFJLE9BQU87QUFBQSxFQUMvQixHQUFHO0FBQUEsRUFDSCxDQUFDLElBQUksR0FBRztBQUNWLElBQUksQ0FBQyxDQUFDO0FBRVIsSUFBTSxVQUFVO0FBQUEsRUFDZDtBQUNGLEVBQ0csSUFBSSxVQUFRO0FBQ1gsUUFBTSxRQUFRLEtBQUssTUFBTSxLQUFLLEdBQUc7QUFDakMsU0FBTyxNQUFNLENBQUM7QUFDaEIsQ0FBQyxFQUNBLE9BQU8sVUFBUSxTQUFTLEdBQUcsRUFDM0IsT0FBTyxDQUFDLEtBQUssUUFBUTtBQUNwQixTQUFPO0FBQUEsSUFDTCxHQUFHO0FBQUEsSUFDSCxDQUFDLGVBQVksR0FBRyxFQUFFLE1BQU0sR0FBRyxNQUFNLElBQUksR0FBRztBQUFBLEVBQzFDO0FBQ0YsR0FBRyxDQUFDLENBQUM7QUFHUCxJQUFPLHNCQUFRLGFBQWE7QUFBQSxFQUMzQixTQUFTO0FBQUEsSUFDUixPQUFPO0FBQUEsTUFDTixLQUFLLEtBQUssUUFBUSxrQ0FBVyxPQUFPO0FBQUEsSUFDckM7QUFBQSxFQUNEO0FBQUEsRUFDQSxTQUFTO0FBQUEsSUFDUixNQUFNO0FBQUEsSUFDSixXQUFXO0FBQUEsTUFDVCxNQUFNO0FBQUEsTUFDTixVQUFVO0FBQUEsTUFDVjtBQUFBLE1BQ0E7QUFBQSxNQUNBLFFBQVEsQ0FBQyxTQUFTLFdBQVc7QUFBQSxJQUMvQixDQUFDO0FBQUEsRUFDSjtBQUFBLEVBQ0MsT0FBTztBQUFBLElBQ0wsUUFBUSxVQUFVLFFBQVEsSUFBSTtBQUFBLElBQzlCLFFBQVE7QUFBQSxFQUNWO0FBQUEsRUFDQSxRQUFRO0FBQUEsSUFDTixNQUFNO0FBQUEsSUFDTixNQUFNLGVBQVksR0FBRyxFQUFFO0FBQUEsRUFDekI7QUFBQSxFQUNBLFNBQVM7QUFBQSxJQUNQLE1BQU07QUFBQSxJQUNOLE1BQU0sZUFBWSxHQUFHLEVBQUU7QUFBQSxFQUN6QjtBQUNGLENBQUM7IiwKICAibmFtZXMiOiBbXQp9Cg==

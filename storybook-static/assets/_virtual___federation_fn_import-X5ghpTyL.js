const q="[0-9A-Za-z-]+",y=`(?:\\+(${q}(?:\\.${q})*))`,_="0|[1-9]\\d*",v="[0-9]+",F="\\d*[a-zA-Z-][a-zA-Z0-9-]*",X=`(?:${v}|${F})`,D=`(?:-?(${X}(?:\\.${X})*))`,E=`(?:${_}|${F})`,K=`(?:-(${E}(?:\\.${E})*))`,T=`${_}|x|X|\\*`,d=`[v=\\s]*(${T})(?:\\.(${T})(?:\\.(${T})(?:${K})?${y}?)?)?`,J=`^\\s*(${d})\\s+-\\s+(${d})\\s*$`,Q=`(${v})\\.(${v})\\.(${v})`,W=`[v=\\s]*${Q}${D}?${y}?`,C="((?:<|>)?=?)",Y=`(\\s*)${C}\\s*(${W}|${d})`,U="(?:~>?)",A=`(\\s*)${U}\\s+`,B="(?:\\^)",j=`(\\s*)${B}\\s+`,m="(<|>)?=?\\s*\\*",ee=`^${B}${d}$`,re=`(${_})\\.(${_})\\.(${_})`,ne=`v?${re}${K}?${y}?`,te=`^${U}${d}$`,se=`^${C}\\s*${d}$`,ie=`^${C}\\s*(${ne})$|^$`,$e="^\\s*>=\\s*0.0.0\\s*$";function o(e){return new RegExp(e)}function c(e){return!e||e.toLowerCase()==="x"||e==="*"}function G(...e){return t=>e.reduce((s,r)=>r(s),t)}function S(e){return e.match(o(ie))}function z(e,t,s,r){const n=`${e}.${t}.${s}`;return r?`${n}-${r}`:n}function ue(e){return e.replace(o(J),(t,s,r,n,i,$,u,f,a,l,R,p)=>(c(r)?s="":c(n)?s=`>=${r}.0.0`:c(i)?s=`>=${r}.${n}.0`:s=`>=${s}`,c(a)?f="":c(l)?f=`<${+a+1}.0.0-0`:c(R)?f=`<${a}.${+l+1}.0-0`:p?f=`<=${a}.${l}.${R}-${p}`:f=`<=${f}`,`${s} ${f}`.trim()))}function ce(e){return e.replace(o(Y),"$1$2$3")}function fe(e){return e.replace(o(A),"$1~")}function ae(e){return e.replace(o(j),"$1^")}function le(e){return e.trim().split(/\s+/).map(t=>t.replace(o(ee),(s,r,n,i,$)=>c(r)?"":c(n)?`>=${r}.0.0 <${+r+1}.0.0-0`:c(i)?r==="0"?`>=${r}.${n}.0 <${r}.${+n+1}.0-0`:`>=${r}.${n}.0 <${+r+1}.0.0-0`:$?r==="0"?n==="0"?`>=${r}.${n}.${i}-${$} <${r}.${n}.${+i+1}-0`:`>=${r}.${n}.${i}-${$} <${r}.${+n+1}.0-0`:`>=${r}.${n}.${i}-${$} <${+r+1}.0.0-0`:r==="0"?n==="0"?`>=${r}.${n}.${i} <${r}.${n}.${+i+1}-0`:`>=${r}.${n}.${i} <${r}.${+n+1}.0-0`:`>=${r}.${n}.${i} <${+r+1}.0.0-0`)).join(" ")}function oe(e){return e.trim().split(/\s+/).map(t=>t.replace(o(te),(s,r,n,i,$)=>c(r)?"":c(n)?`>=${r}.0.0 <${+r+1}.0.0-0`:c(i)?`>=${r}.${n}.0 <${r}.${+n+1}.0-0`:$?`>=${r}.${n}.${i}-${$} <${r}.${+n+1}.0-0`:`>=${r}.${n}.${i} <${r}.${+n+1}.0-0`)).join(" ")}function pe(e){return e.split(/\s+/).map(t=>t.trim().replace(o(se),(s,r,n,i,$,u)=>{const f=c(n),a=f||c(i),l=a||c($);return r==="="&&l&&(r=""),u="",f?r===">"||r==="<"?"<0.0.0-0":"*":r&&l?(a&&(i=0),$=0,r===">"?(r=">=",a?(n=+n+1,i=0,$=0):(i=+i+1,$=0)):r==="<="&&(r="<",a?n=+n+1:i=+i+1),r==="<"&&(u="-0"),`${r+n}.${i}.${$}${u}`):a?`>=${n}.0.0${u} <${+n+1}.0.0-0`:l?`>=${n}.${i}.0${u} <${n}.${+i+1}.0-0`:s})).join(" ")}function de(e){return e.trim().replace(o(m),"")}function _e(e){return e.trim().replace(o($e),"")}function h(e,t){return e=+e||e,t=+t||t,e>t?1:e===t?0:-1}function Re(e,t){const{preRelease:s}=e,{preRelease:r}=t;if(s===void 0&&r)return 1;if(s&&r===void 0)return-1;if(s===void 0&&r===void 0)return 0;for(let n=0,i=s.length;n<=i;n++){const $=s[n],u=r[n];if($!==u)return $===void 0&&u===void 0?0:$?u?h($,u):-1:1}return 0}function V(e,t){return h(e.major,t.major)||h(e.minor,t.minor)||h(e.patch,t.patch)||Re(e,t)}function g(e,t){return e.version===t.version}function Ve(e,t){switch(e.operator){case"":case"=":return g(e,t);case">":return V(e,t)<0;case">=":return g(e,t)||V(e,t)<0;case"<":return V(e,t)>0;case"<=":return g(e,t)||V(e,t)>0;case void 0:return!0;default:return!1}}function ve(e){return G(le,oe,pe,de)(e)}function he(e){return G(ue,ce,fe,ae)(e.trim()).split(/\s+/).join(" ")}function we(e,t){if(!e)return!1;const n=he(t).split(" ").map(p=>ve(p)).join(" ").split(/\s+/).map(p=>_e(p)),i=S(e);if(!i)return!1;const[,$,,u,f,a,l]=i,R={version:z(u,f,a,l),major:u,minor:f,patch:a,preRelease:l?.split(".")};for(const p of n){const P=S(p);if(!P)return!1;const[,M,,I,L,O,b]=P,N={operator:M,version:z(I,L,O,b),major:I,minor:L,patch:O,preRelease:b?.split(".")};if(!Ve(N,R))return!1}return!0}const Z={},x={react:{get:()=>()=>k(new URL("__federation_shared_react-C7IyZVKu.js",import.meta.url).href),import:!0},"react-dom":{get:()=>()=>k(new URL("__federation_shared_react-dom-Dj0dEy4o.js",import.meta.url).href),import:!0}},w=Object.create(null);async function ge(e,t="default"){return w[e]?new Promise(s=>s(w[e])):await be(e,t)||Te(e)}async function k(e){return Z[e]??=import(e),Z[e]}async function be(e,t){let s=null;if(globalThis?.__federation_shared__?.[t]?.[e]){const r=globalThis.__federation_shared__[t][e],n=x[e]?.requiredVersion;if(!!n){const $=Object.keys(r).find(u=>we(u,n));$?s=await(await r[$].get())():console.log(`provider support ${e}(${$}) is not satisfied requiredVersion(\${moduleMap[name].requiredVersion})`)}else{const $=Object.keys(r)[0];s=await(await r[$].get())()}}if(s)return H(s,e)}async function Te(e){if(x[e]?.import){let t=await(await x[e].get())();return H(t,e)}else console.error("consumer config import=false,so cant use callback shared module")}function H(e,t){return typeof e.default=="function"?(Object.keys(e).forEach(s=>{s!=="default"&&(e.default[s]=e[s])}),w[t]=e.default,e.default):(e.default&&(e=Object.assign({},e.default,e)),w[t]=e,e)}export{ge as i};
